---
layout: post
title: Building Real Time Clock (RTC) module based on DS1307 for Arduino
date: '2013-03-21T23:06:00.001+05:30'
author: Anonymous
tags:
- RTC
- Arduino PRO
- DS1307
- I2C
- Interface
- Clock
- Arduino
- ATMEGA328
modified_time: '2013-03-21T23:06:24.804+05:30'
thumbnail: http://lh6.ggpht.com/-UyrExPBOj5U/UUtE9y-nP0I/AAAAAAAAAUo/fCUZkTCV0cc/s72-c/DSCF5835_640x480_thumb%25255B4%25255D.jpg?imgmax=800
blogger_id: tag:blogger.com,1999:blog-286864074933316179.post-5416400344044302955
blogger_orig_url: https://www.incrediblediy.com/2013/03/building-real-time-clock-rtc-module.html
---

<p>In this post I’m going to build a Real Time Clock (RTC) module based on popular DS1307 RTC chip for using with Arduino or any other micro-controller platform. DS1307 uses I2C protocol to communicate with the microcontroller.</p>  <p><u>RTC Module:</u></p>  <p>This is the circuit we have to build and it has few readily available components. The 3V coil cell battery is used to give backup power to the RTC.&#160; Make sure to solder a 4 pin connector for Vcc,GND,SCL,SDA connections. 1kOhm pull up resistors are used for the I2C bus in the circuit.</p>  <p><a href="http://lh5.ggpht.com/-dseDOOkTI_M/UUtE8xNKgGI/AAAAAAAAAUg/kE3W5hS_L5Y/s1600-h/DSCF5835_640x480%25255B10%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px; padding-top: 0px" title="DSCF5835_640x480" border="0" alt="DSCF5835_640x480" src="http://lh6.ggpht.com/-UyrExPBOj5U/UUtE9y-nP0I/AAAAAAAAAUo/fCUZkTCV0cc/DSCF5835_640x480_thumb%25255B4%25255D.jpg?imgmax=800" width="316" height="291" /></a></p>  <p>I got the 32.768kHz Crystal and 3V CR2032 coil cell battery holder from an old computer mother board. I think they are available at any electronic component shop. </p>  <p><a href="http://lh4.ggpht.com/-Q_j2atJU9tY/UUtE_I14FUI/AAAAAAAAAUw/suPzhp93yX8/s1600-h/DSCF5814_640x480%25255B14%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px; padding-top: 0px" title="DSCF5814_640x480" border="0" alt="DSCF5814_640x480" src="http://lh5.ggpht.com/-cbsH-RA7xfk/UUtE_2emrEI/AAAAAAAAAU4/nzM442fZFrw/DSCF5814_640x480_thumb%25255B8%25255D.jpg?imgmax=800" width="359" height="305" /></a><a href="http://lh6.ggpht.com/-SzBLessf_6Q/UUtFA6enjBI/AAAAAAAAAVA/Vw4EXgJ3NIM/s1600-h/DSCF5823_640x480%25255B4%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px; padding-top: 0px" title="DSCF5823_640x480" border="0" alt="DSCF5823_640x480" src="http://lh3.ggpht.com/-1dHUdSI2XEw/UUtFBvYZ1XI/AAAAAAAAAVI/1FI-jIqSSuw/DSCF5823_640x480_thumb%25255B1%25255D.jpg?imgmax=800" width="365" height="290" /></a></p>  <p>After collecting parts I built the circuit on a piece of veroboard. Total cost was around Rs:70 ($0.55). I used 4pin connector for above mentioned connections. If you don’t have a coin cell battery, make sure to short the two battery pins as on the picture,but you won’t have the backup power in case of a power failure.</p>  <p><a href="http://lh6.ggpht.com/-Tm773rGLaog/UUtFCU-pt3I/AAAAAAAAAVQ/hQRXgSGvlHY/s1600-h/DSCF5829_640x480%25255B4%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px; padding-top: 0px" title="DSCF5829_640x480" border="0" alt="DSCF5829_640x480" src="http://lh3.ggpht.com/-U6bNjZp99k4/UUtFDFkjTqI/AAAAAAAAAVY/Yr2dLwc2GMw/DSCF5829_640x480_thumb%25255B1%25255D.jpg?imgmax=800" width="275" height="484" /></a></p>                <p><u>Arduino Board:</u></p>  <p>I’m using my Techduino Pro board which I build on an <a href="http://www.incrediblediy.com/2013/03/building-arduino-pro-arduino-uno-with.html">earlier post</a> along with the my <a href="http://www.incrediblediy.com/2013/03/modifying-cheap-cp2102-usb-to-uart.html">modified CP2102</a> USB to UART board. Please note that my Arduino is working at 3.3V.</p>  <p><u>Connections:</u></p>  <p>I connected the two boards as follows, You can get Arduino –&gt; ATMEGA328 pinout from <a href="http://www.hobbytronics.co.uk/arduino-atmega328-pinout">here</a>.Even though <a href="http://datasheets.maximintegrated.com/en/ds/DS1307.pdf" target="_blank">DS1307 datasheet</a> tells that the operating voltage of the chip is 5V, It worked well even at the 3.3V as I used here. Please be aware of that to avoid unnecessary outcomes.</p>  <p>&#160;</p>  <table border="1" cellspacing="0" cellpadding="2" width="400"><tbody>     <tr>       <td valign="top" width="200">RTC Module</td>        <td valign="top" width="200">Arduino</td>     </tr>      <tr>       <td valign="top" width="200">Vcc</td>        <td valign="top" width="200">+3.3V or +5V (As you need)</td>     </tr>      <tr>       <td valign="top" width="200">GND</td>        <td valign="top" width="200">GND</td>     </tr>      <tr>       <td valign="top" width="200">SDA</td>        <td valign="top" width="200">SDA (Analog Pin 4)</td>     </tr>      <tr>       <td valign="top" width="200">SCL</td>        <td valign="top" width="200">SCL (Analog Pin 5)</td>     </tr>   </tbody></table>  <p><a href="http://lh6.ggpht.com/-8dJS1CHc-9U/UUtFDxKD4_I/AAAAAAAAAVg/Cbdtn13m-Zs/s1600-h/DSCF5834_640x480%25255B4%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="DSCF5834_640x480" border="0" alt="DSCF5834_640x480" src="http://lh3.ggpht.com/-I65Ys_PO0Qo/UUtFEdO-SqI/AAAAAAAAAVo/VaiFrssjESE/DSCF5834_640x480_thumb%25255B1%25255D.jpg?imgmax=800" width="644" height="439" /></a></p>  <p><u>Coding:</u></p>  <p>You can just write a code using Wire library. Make sure that DS1307 sends 7 BCD digits containing date &amp; time. I was lazy to reinvent the wheel and opted to use the DS1307 RTC library for the Arduino. Get it from <a href="https://github.com/adafruit/RTClib/zipball/master" target="_blank">here</a> and extract to the libraries folder in your Arduino IDE folder (Rename it to RTC after extracting).I modified the example file to show how to use it.</p>  <table border="1" cellspacing="0" cellpadding="2" width="618"><tbody>     <tr>       <td valign="top" width="616">         <p>#include &lt;Wire.h&gt;           <br />#include &quot;RTClib.h&quot;</p>          <p>RTC_DS1307 RTC;</p>          <p>void setup () {           <br />&#160;&#160;&#160; Serial.begin(57600); // UART initialize             <br />&#160;&#160;&#160; Wire.begin();            <br />&#160;&#160;&#160; RTC.begin();            <br />&#160;&#160; // RTC.adjust(DateTime(&quot;MAY 21 2013&quot;,&quot;20:40:45&quot;)); //you can use this to set initial date/time as you wish            <br />&#160; <br />}</p>          <p>void loop () {           <br />&#160;&#160;&#160; DateTime now = RTC.now();            <br />&#160;&#160;&#160;&#160; <br />// Sending date &amp; time to UART every second&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160; Serial.print(now.year(), DEC);            <br />&#160;&#160;&#160; Serial.print('/');            <br />&#160;&#160;&#160; Serial.print(now.month(), DEC);            <br />&#160;&#160;&#160; Serial.print('/');            <br />&#160;&#160;&#160; Serial.print(now.day(), DEC);            <br />&#160;&#160;&#160; Serial.print(' ');            <br />&#160;&#160;&#160; Serial.print(now.hour(), DEC);            <br />&#160;&#160;&#160; Serial.print(':');            <br />&#160;&#160;&#160; Serial.print(now.minute(), DEC);            <br />&#160;&#160;&#160; Serial.print(':');            <br />&#160;&#160;&#160; Serial.print(now.second(), DEC);            <br />&#160;&#160;&#160; Serial.println();            <br />&#160;&#160; delay(1000);            <br />}            <br /></p>       </td>     </tr>   </tbody></table>  <p><a href="http://lh3.ggpht.com/-rfbYnOSvuno/UUtFFLeDM9I/AAAAAAAAAVw/PYCllsrJkbU/s1600-h/scrn%25255B3%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="scrn" border="0" alt="scrn" src="http://lh4.ggpht.com/-YhnDUP6vKXQ/UUtFF1MNR2I/AAAAAAAAAV4/uP-4sK7m-a8/scrn_thumb%25255B1%25255D.jpg?imgmax=800" width="526" height="484" /></a></p>  