---
layout: post
title: Simple 16*2 LCD driver with PIC16F887
date: '2013-02-16T18:37:00.001+05:30'
author: Anonymous
tags:
- 16F887
- LCD
- DIY
- Microcontroller
- development
modified_time: '2013-02-16T18:37:57.984+05:30'
thumbnail: http://lh4.ggpht.com/-4aEyECeOVWc/UR-EOcVDGXI/AAAAAAAAAA8/tzzl15J-IXw/s72-c/wlEmoticon-winkingsmile%25255B2%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-286864074933316179.post-5604913001473833533
blogger_orig_url: https://www.incrediblediy.com/2013/02/simple-162-lcd-driver-with-pic16f887.html
---

<p>In good old days,using a LCD display on a DIY project was quite trouble some.But now it has become much cheaper and simpler to use a LCD in a such project.Here,we are going to use industry defacto Hitachi HD44780 controller base one from ebay.fro US$ 2.89 including shipping.You can see it <a href="http://www.ebay.com/itm/1602-16x2-Character-LCD-Display-Module-HD44780-Controller-Blue-Blacklight-/170817946781?ssPageName=ADME:L:OC:US:3160">here</a>.</p>  <p>Next part is the microcontroller base driver unit.I’m using <a href="http://ww1.microchip.com/downloads/en/devicedoc/41291f.pdf">PIC16F887</a> as the microcontroller here as I’m going to do some other stuffs with it in upcoming posts <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Winking smile" src="http://lh4.ggpht.com/-4aEyECeOVWc/UR-EOcVDGXI/AAAAAAAAAA8/tzzl15J-IXw/wlEmoticon-winkingsmile%25255B2%25255D.png?imgmax=800" />. PIC16F887 is really nice uC with internal oscillator upto 8Mhz.So,we don’t have to use external clock source or crystal for non-timing critical application <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-smile" alt="Smile" src="http://lh5.ggpht.com/-8yXLvDN71_A/UR-EPI8BFGI/AAAAAAAAABE/MNgagu4W1bk/wlEmoticon-smile%25255B2%25255D.png?imgmax=800" /> The whole circuit will be simpler to be build and cheaper due to less components.</p>  <p>My choice of programming language is Mikro C Pro as it has many in-built functions.You can get the free demo version as on my <a href="http://www.incrediblediy.com/2012/03/micro-controller-networking-uart-to-spi.html">previous post.</a></p>  <p>Let’s look at the schematic diagram <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-smile" alt="Smile" src="http://lh5.ggpht.com/-8yXLvDN71_A/UR-EPI8BFGI/AAAAAAAAABE/MNgagu4W1bk/wlEmoticon-smile%25255B2%25255D.png?imgmax=800" /></p>  <p><a href="http://lh3.ggpht.com/-QwbGj3jdTQU/UR-EQSwyPYI/AAAAAAAAABM/LmTrgJV4UtI/s1600-h/DSCF5560_800x600%25255B4%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="DSCF5560_800x600" border="0" alt="DSCF5560_800x600" src="http://lh3.ggpht.com/-ldPhRLUGRJ4/UR-ER024WmI/AAAAAAAAABU/4uKAsPmh80s/DSCF5560_800x600_thumb%25255B1%25255D.jpg?imgmax=800" width="804" height="604" /></a></p>  <p>I’m using PicKit2 programmer I built <a href="http://www.incrediblediy.com/2011/07/homemade-usb-pic-programmer-pickit2.html">earlier</a> to program the uC using ICSP.The variable resistor connected to VO pin of the LCD is used to change contrast of the LCD.For testing,I’m going to powerup the whole thing using the ICSP port(from +5V via the USB port itself to the PK2 programmer).The LED used for just for monitoring <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Winking smile" src="http://lh4.ggpht.com/-4aEyECeOVWc/UR-EOcVDGXI/AAAAAAAAAA8/tzzl15J-IXw/wlEmoticon-winkingsmile%25255B2%25255D.png?imgmax=800" />&#160;</p>  <p>Let’s look at the MikroC code,</p>  <table border="1" cellspacing="0" cellpadding="2" width="400"><tbody>     <tr>       <td valign="top" width="400">         <p>sbit LCD_RS at RB5_bit;           <br />sbit LCD_EN at RB4_bit;            <br />sbit LCD_D4 at RB3_bit;            <br />sbit LCD_D5 at RB2_bit;            <br />sbit LCD_D6 at RB1_bit;            <br />sbit LCD_D7 at RB0_bit;</p>          <p>sbit LCD_RS_Direction at TRISB5_bit;           <br />sbit LCD_EN_Direction at TRISB4_bit;            <br />sbit LCD_D4_Direction at TRISB3_bit;            <br />sbit LCD_D5_Direction at TRISB2_bit;            <br />sbit LCD_D6_Direction at TRISB1_bit;            <br />sbit LCD_D7_Direction at TRISB0_bit;</p>          <p>void main() {           <br />&#160;&#160;&#160; osccon = 0x70;            <br />&#160;&#160;&#160; ansel&#160; = 0;            <br />&#160;&#160;&#160; anselh&#160; = 0;            <br />&#160;&#160;&#160; trisb = 0;            <br />&#160;&#160;&#160; trisd = 0;            <br />&#160;&#160;&#160; Lcd_Init();</p>          <p>&#160; Lcd_Cmd(_LCD_CLEAR);           <br />&#160; Lcd_Cmd(_LCD_CURSOR_OFF);            <br />&#160; Lcd_Out(1,1,&quot;www.incredible&quot;);            <br />&#160; Lcd_Out(2,1,&quot;diy.com&quot;);            <br />&#160; <br />&#160; for(;;){            <br />&#160; portd.f4=1;            <br />&#160; delay_ms(1000);            <br />&#160; portd.f4=0;            <br />&#160; delay_ms(1000);            <br />&#160; }            <br />&#160;&#160;&#160; <br />}</p>       </td>     </tr>   </tbody></table>  <p>The first few lines are used to define the pins used for the LCD library.You can find more information about that from <a href="www.mikroe.com/download/eng/documents/compilers/mikroc/pro/pic/help/lcd_library.htm">here</a>.Then,I have set the internal clock to 8Mhz as on the 4.2 section(page 62) of the <a href="http://ww1.microchip.com/downloads/en/devicedoc/41291f.pdf">PIC16F887 datasheet</a>.Check there to find information on how to set different internal clock frequencies other than 8Mhz.Then,ANSEL registered are selected to disable analog input pins(ANx) as I use them as Digital IO pins on my project.The LCD is initialized and Lcd_Out(row,column,”text”) command is used to output characters to the LCD display.Isn’t that so simple <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Winking smile" src="http://lh4.ggpht.com/-4aEyECeOVWc/UR-EOcVDGXI/AAAAAAAAAA8/tzzl15J-IXw/wlEmoticon-winkingsmile%25255B2%25255D.png?imgmax=800" /> (I think the above syntax is self explanatory <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Winking smile" src="http://lh4.ggpht.com/-4aEyECeOVWc/UR-EOcVDGXI/AAAAAAAAAA8/tzzl15J-IXw/wlEmoticon-winkingsmile%25255B2%25255D.png?imgmax=800" /> )</p>  <p> Make sure to select appropriate configuration bits for the project.We have to used oscillator type as internal as below.</p>  <p><a href="http://lh6.ggpht.com/-9pQVLIusOtk/UR-EVuUYAQI/AAAAAAAAABc/GPRVhPCjfjY/s1600-h/Capture%25255B3%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="Capture" border="0" alt="Capture" src="http://lh3.ggpht.com/-TAmDAE1-Ig4/UR-EZDErJzI/AAAAAAAAABk/lJyoAaIzvGM/Capture_thumb%25255B1%25255D.jpg?imgmax=800" width="805" height="516" /></a></p>  <p>Now it is the time to check the built and tested circuit <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Winking smile" src="http://lh4.ggpht.com/-4aEyECeOVWc/UR-EOcVDGXI/AAAAAAAAAA8/tzzl15J-IXw/wlEmoticon-winkingsmile%25255B2%25255D.png?imgmax=800" /></p>  <p><a href="http://lh3.ggpht.com/-fdHv4-6Be8o/UR-EeNIDH3I/AAAAAAAAABs/CZ7cAEJYCFg/s1600-h/DSCF5557_800x600%25255B4%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="DSCF5557_800x600" border="0" alt="DSCF5557_800x600" src="http://lh4.ggpht.com/-yypV7YmLTvI/UR-EhzNBhWI/AAAAAAAAAB0/eBkpHqjk8LQ/DSCF5557_800x600_thumb%25255B1%25255D.jpg?imgmax=800" width="804" height="604" /></a></p>  <p><a href="http://lh3.ggpht.com/-y5DIxa7Od54/UR-Ek9UcyGI/AAAAAAAAAB8/9CmGZjIoCO8/s1600-h/DSCF5556_800x600%25255B4%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="DSCF5556_800x600" border="0" alt="DSCF5556_800x600" src="http://lh6.ggpht.com/-vHHob17PDxQ/UR-EnANySiI/AAAAAAAAACE/TBmSsLEio5g/DSCF5556_800x600_thumb%25255B1%25255D.jpg?imgmax=800" width="804" height="604" /></a></p>  <p><a href="http://lh6.ggpht.com/-aEDIKih6uNo/UR-EpglkurI/AAAAAAAAACM/4zRLP0mX9jo/s1600-h/DSCF5551_800x600%25255B4%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="DSCF5551_800x600" border="0" alt="DSCF5551_800x600" src="http://lh4.ggpht.com/-dag-gsQUaRc/UR-ErKtMTMI/AAAAAAAAACU/383LBQO_CKg/DSCF5551_800x600_thumb%25255B1%25255D.jpg?imgmax=800" width="804" height="604" /></a></p>  