---
layout: post
title: Driving a Unipolar stepper motor using ULN2803 + PIC16F887
date: '2013-02-17T09:40:00.001+05:30'
author: Anonymous
tags:
- 16F887
- Darlington
- ULN2803
- Driver
- DIY
- development
- I/O
- Motor
modified_time: '2013-02-17T09:40:17.784+05:30'
thumbnail: http://lh3.ggpht.com/-Xz_LAwrVlTU/USBX2ek1EUI/AAAAAAAAAGA/o1f1JB8dbxc/s72-c/DSCF5576_800x600_thumb%25255B1%25255D.jpg?imgmax=800
blogger_id: tag:blogger.com,1999:blog-286864074933316179.post-211968097205705512
blogger_orig_url: https://www.incrediblediy.com/2013/02/driving-unipolar-stepper-motor-using.html
---

<p>Recently I dissembled an old Canon S200SP printer to get some motors. I found a unipolar stepper motor with 5 wires on it. But the model number is unclear as the motor is bit rusted. I tried to give a try.</p>  <p>First thing you have to do it check the resistance between the wires. You will find a wire which has lowest resistance with other wires. This is the centre tap. In my case,it is the red wire and in most cases this wire will be red.</p>  <p><a href="http://electronics-diy.com/stepper_motors.php">Electronics-diy.com</a> has a good article on stepper motor basics and about windings. I’m not going to tell those again and you can refer to <a href="http://electronics-diy.com/stepper_motors.php">that page.</a></p>  <p>I simply modified my general ULN2803 driver circuit to drive the stepper motor in single stepping mode (powering up single coil at a time) . I connected stepper motor to ULN2803 as loads according to the 2nd picture.</p>  <p><a href="http://lh5.ggpht.com/-oXp65bINPeg/USBXz3dRt0I/AAAAAAAAAF4/jm9QnvvGmkc/s1600-h/DSCF5576_800x600%25255B4%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="DSCF5576_800x600" border="0" alt="DSCF5576_800x600" src="http://lh3.ggpht.com/-Xz_LAwrVlTU/USBX2ek1EUI/AAAAAAAAAGA/o1f1JB8dbxc/DSCF5576_800x600_thumb%25255B1%25255D.jpg?imgmax=800" width="795" height="371" /></a></p>  <p><a href="http://lh4.ggpht.com/--2g1H-k44k8/USBX5MPHZfI/AAAAAAAAAGI/frpJYwrJBf8/s1600-h/DSCF5608_800x600%25255B4%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="DSCF5608_800x600" border="0" alt="DSCF5608_800x600" src="http://lh5.ggpht.com/-aUh2jkDMJYc/USBX69PJiXI/AAAAAAAAAGQ/1csYUZZQv9E/DSCF5608_800x600_thumb%25255B1%25255D.jpg?imgmax=800" width="671" height="329" /></a></p>    <p>Now,It is time to do the coding,I simply edited previous MickroC code and same configuration bits were selected <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Winking smile" src="http://lh4.ggpht.com/-Y53tijgL0LA/USBX7twB8CI/AAAAAAAAAGY/m6vbWktzuT0/wlEmoticon-winkingsmile%25255B2%25255D.png?imgmax=800" />The bolded code is for single stepping mode <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-openmouthedsmile" alt="Open-mouthed smile" src="http://lh4.ggpht.com/-xkWEsS6S1R4/USBX8LaH-gI/AAAAAAAAAGg/xS4SXcwXp0k/wlEmoticon-openmouthedsmile%25255B2%25255D.png?imgmax=800" /></p>  <table border="1" cellspacing="0" cellpadding="2" width="400"><tbody>     <tr>       <td valign="top" width="400">         <p>           <br />void main() {</p>          <p>           <br />&#160;&#160;&#160; osccon = 0x70;            <br />&#160;&#160;&#160; ansel&#160; = 0;            <br />&#160;&#160;&#160; anselh&#160; = 0;            <br />&#160;&#160;&#160; trisa = 0;            <br />&#160;&#160;&#160; trisb = 0;            <br />&#160;&#160;&#160; trisc = 0;            <br />&#160;&#160;&#160; trisd = 0;            <br />&#160;&#160; <br />&#160; for(;;){            <br />&#160; portd.f4=1;            <br />&#160; <br /><strong>&#160; porta.f7=1;             <br />&#160; porta.f6=0;              <br />&#160; portc.f0=0;              <br />&#160; portc.f1=0;</strong></p>          <p>&#160; delay_ms(10);</p>          <p><strong>&#160; porta.f7=0;             <br />&#160; porta.f6=1;              <br />&#160; portc.f0=0;              <br />&#160; portc.f1=0;              <br /></strong>&#160; <br />&#160; delay_ms(10);            <br />&#160; <br /><strong>&#160; porta.f7=0;             <br />&#160; porta.f6=0;              <br />&#160; portc.f0=1;              <br />&#160; portc.f1=0;</strong></p>          <p>&#160; delay_ms(10);           <br />&#160; <br /><strong>&#160; porta.f7=0;             <br />&#160; porta.f6=0;              <br />&#160; portc.f0=0;              <br />&#160; portc.f1=1;</strong></p>          <p>&#160; portd.f4=0;           <br />&#160; delay_ms(10);            <br />&#160; <br />&#160; <br />&#160; delay_ms(2000);            <br />&#160; }            <br />&#160;&#160;&#160; <br />}</p>       </td>     </tr>   </tbody></table> <a href="http://lh5.ggpht.com/-0p0Q_AePpJQ/USBX-lc2tCI/AAAAAAAAAGo/QL1Iv2n6Bog/s1600-h/Capture%25255B3%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="Capture" border="0" alt="Capture" src="http://lh4.ggpht.com/-oYjYvCDtmZ0/USBYCbOSHNI/AAAAAAAAAGw/UJ1XTRj5hO0/Capture_thumb%25255B1%25255D.jpg?imgmax=800" width="805" height="516" /></a>  <p>Let’s check the working circuit <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Winking smile" src="http://lh4.ggpht.com/-Y53tijgL0LA/USBX7twB8CI/AAAAAAAAAGY/m6vbWktzuT0/wlEmoticon-winkingsmile%25255B2%25255D.png?imgmax=800" /></p>  <p><a href="http://lh5.ggpht.com/-HXu68H9Svjw/USBYGicuzzI/AAAAAAAAAG4/U7nkPz67hWc/s1600-h/DSCF5594_800x600%25255B4%25255D.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="DSCF5594_800x600" border="0" alt="DSCF5594_800x600" src="http://lh4.ggpht.com/--ygpw0oZsxY/USBYJ5DAZEI/AAAAAAAAAHA/YmO2qYoeUaI/DSCF5594_800x600_thumb%25255B1%25255D.jpg?imgmax=800" width="744" height="517" /></a></p>  <p>If everything is correctly done,Your motor will be in continuous run <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-openmouthedsmile" alt="Open-mouthed smile" src="http://lh4.ggpht.com/-xkWEsS6S1R4/USBX8LaH-gI/AAAAAAAAAGg/xS4SXcwXp0k/wlEmoticon-openmouthedsmile%25255B2%25255D.png?imgmax=800" /> I’m going to get some angle measurements and to add a LCD to this project. Stay tuned and follow me on twitter <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Winking smile" src="http://lh4.ggpht.com/-Y53tijgL0LA/USBX7twB8CI/AAAAAAAAAGY/m6vbWktzuT0/wlEmoticon-winkingsmile%25255B2%25255D.png?imgmax=800" /> @incrediblediy <img style="border-bottom-style: none; border-right-style: none; border-top-style: none; border-left-style: none" class="wlEmoticon wlEmoticon-openmouthedsmile" alt="Open-mouthed smile" src="http://lh4.ggpht.com/-xkWEsS6S1R4/USBX8LaH-gI/AAAAAAAAAGg/xS4SXcwXp0k/wlEmoticon-openmouthedsmile%25255B2%25255D.png?imgmax=800" /></p>  