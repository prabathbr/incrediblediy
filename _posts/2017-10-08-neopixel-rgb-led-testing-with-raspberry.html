---
layout: post
title: NeoPixel RGB LED testing with Raspberry PI 3 without logic level shift
date: '2017-10-08T11:14:00.002+05:30'
author: බුද්ධික
tags:
- Raspberry Pi 3
- RGB
- LED
- Library
- Python
- Raspbian Stretch
- Display
- Level Shift
- NeoPixels
- rpi_ws281x
modified_time: '2017-10-08T11:17:32.872+05:30'
thumbnail: https://4.bp.blogspot.com/-2QbaKzhNPYg/Wdm0qjdI-TI/AAAAAAAADHI/7jF1ZBQ9BtwKavOLgN1DFqzf9pJPgyAPQCLcBGAs/s72-c/conn.jpg
blogger_id: tag:blogger.com,1999:blog-286864074933316179.post-5220684484362480467
blogger_orig_url: https://www.incrediblediy.com/2017/10/neopixel-rgb-led-testing-with-raspberry.html
---

Recently, I learned that, there are RGB LEDs called <a href="https://www.adafruit.com/category/168">NeoPixels</a> with a kind of one wire interface built-in to change the colour of the LED by providing a specific clock signal. I quickly ordered a strip of 8 LED to try it out from <a href="http://www.ebay.com/">ebay</a>. I received it very quickly and the model number mentioned in the PCB is "CJMCU-2812-8".<br /><br />As I was working with my Raspberry Pi 3 running <a href="https://www.raspberrypi.org/downloads/raspbian/">Raspbian Stretch Lite</a> for some other project, I wanted to test my NeoPixels with the same. After a bit of online research, I found out that many people have used level convertors to convert 3.3V logic of RPi3 to 5V logic of NeoPixels. Any how I wanted to try out the direct connection without any logic conversion with below options.<br /><br />1. Powering up NeoPixels with 3.3V, so that the logic level will be the same as RPi3. Some posts from internet suggested that brightness will be reduced. As per my observation it is negligible.<br /><br />2. Powering up NeoPixels with 5V, but connect RPi3 3.3V logic directly and hope for the best. But in my test setup, it worked perfectly without any issue.<br /><br />The connection between RPi3 and NeoPixel PCB was straight forward when using the RPi3 library called <a href="https://learn.adafruit.com/neopixels-on-raspberry-pi/software">rpi_ws281x</a>.<br /><br />GND -&gt; GND<br />GPIO 18 (PWM0) -&gt; DIN<br />5V or 3.3V -&gt; 4-7VDC<br />GND -&gt; GND<br /><br /><u>RPi Pin-out courtesy of <a href="http://pinout.xyz/">pinout.xyz</a></u><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://pinout.xyz/resources/raspberry-pi-pinout.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="249" data-original-width="800" height="199" src="https://pinout.xyz/resources/raspberry-pi-pinout.png" width="640" /></a></div><u>RPi3 to NeoPixels PCB connection</u><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-2QbaKzhNPYg/Wdm0qjdI-TI/AAAAAAAADHI/7jF1ZBQ9BtwKavOLgN1DFqzf9pJPgyAPQCLcBGAs/s1600/conn.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="524" data-original-width="666" height="313" src="https://4.bp.blogspot.com/-2QbaKzhNPYg/Wdm0qjdI-TI/AAAAAAAADHI/7jF1ZBQ9BtwKavOLgN1DFqzf9pJPgyAPQCLcBGAs/s400/conn.jpg" width="400" /></a></div><br />You can follow up the detailed user manual of <a href="https://learn.adafruit.com/neopixels-on-raspberry-pi/software">rpi_ws281x</a> as a guide to install and use the library with <a href="https://www.raspberrypi.org/downloads/raspbian/">Raspbian Stretch Lite</a>. I used below commands in order to test.<br /><br /><u>Download and install the library</u><br /><br />pi@raspberrypi:~ $ sudo apt-get update<br />pi@raspberrypi:~ $ sudo apt-get install build-essential python-dev git scons swig<br />pi@raspberrypi:~ $ mkdir neo<br />pi@raspberrypi:~ $ cd neo<br />pi@raspberrypi:~/neo $ git clone https://github.com/jgarff/rpi_ws281x.git<br />pi@raspberrypi:~/neo $ cd rpi_ws281x<br />pi@raspberrypi:~/neo/rpi_ws281x $ scons<br />pi@raspberrypi:~/neo/rpi_ws281x $ cd python<br />pi@raspberrypi:~/neo/rpi_ws281x/python $ sudo python setup.py install<br /><br /><u>Testing with standtest.py<b> </b>script</u><br /><br />pi@raspberrypi:~/neo/rpi_ws281x/python $ cd examples<br />pi@raspberrypi:~/neo/rpi_ws281x/python/examples $ ls<br />lowlevel.py&nbsp; multistrandtest.py&nbsp; neopixelclock.py&nbsp; SK6812_lowlevel.py&nbsp; SK6812_strandtest.py&nbsp; SK6812_white_test.py&nbsp; strandtest.py<br />pi@raspberrypi:~/neo/rpi_ws281x/python/examples $ nano strandtest.py<br /><br /><br />Change parameter as below for my 8 LED strip then <b>CTRL+X</b> and then <b>Y</b> to save:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-4-7iQdaoFnU/Wdm6o5y8B6I/AAAAAAAADHk/qKBdQRH_iGwmf7gFhi4YCX3UOqAf39kYACLcBGAs/s1600/nano.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="327" data-original-width="769" height="272" src="https://3.bp.blogspot.com/-4-7iQdaoFnU/Wdm6o5y8B6I/AAAAAAAADHk/qKBdQRH_iGwmf7gFhi4YCX3UOqAf39kYACLcBGAs/s640/nano.jpg" width="640" /></a></div><br />&nbsp;pi@raspberrypi:~/neo/rpi_ws281x/python/examples $ sudo python strandtest.py<br />Press Ctrl-C to quit.<br />Color wipe animations.<br />Theater chase animations.<br />Rainbow animations.<br /><br /><br />This is the final result of my setup running <b>standtest.py</b> test script.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-LfJ-C-1OUhU/Wdm2kbwAjcI/AAAAAAAADHY/Vkf3SFonGZY7LD7w4OqoaGbyWal9gm-0ACLcBGAs/s1600/run.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="491" data-original-width="382" height="640" src="https://2.bp.blogspot.com/-LfJ-C-1OUhU/Wdm2kbwAjcI/AAAAAAAADHY/Vkf3SFonGZY7LD7w4OqoaGbyWal9gm-0ACLcBGAs/s640/run.jpg" width="496" /></a></div>